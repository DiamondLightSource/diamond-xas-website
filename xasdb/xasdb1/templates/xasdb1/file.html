{% extends 'xasdb1/base.html' %}

{% block title %}
{{ file.sample_name }}
{% endblock %}


{% block content %}
<p><div><h1>Spectrum: {{file.sample_name}}</h1></div>
<p>
         {% if messages %}
            <ul>
                {% for message in messages %}
                <li>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
<table><tr>
	{% for plot in plots %}
		<td><img width=550 src="data:image/png;base64,{{ plot|safe }}"/></td>
	{% endfor %}
	</tr>
</table>

<br/>

<table class="file-table-main">
<tr>
	<td> Original Data File: </td>
	<td> <a href="{{ file.upload_file.url }}">{{ file.name }}</a></td>
</tr>
<tr>
	<td>Absorption Edge:</td>
	<td><a href="{% url 'xasdb1:element' file.element %}">{{ file.element }}</a> {{file.edge}} edge</td>
</tr>
<tr>
	<td>Sample Name:</td>
	<td>{{file.sample_name}}</td>
</tr>
<tr>
	<td>Sample Preparation:</td>
	<td>{{file.sample_prep}}</td>
</tr>
<tr>
	<td>Beamline:</td>
	<td>{{ file.beamline_name }} @ {{ file.facility_name }}</td>
</tr>
<tr>
	<td>Mono d-spacing:</td>
	<td>{{ file.mono_d_spacing }} &#8491; ({{ file.mono_name }})</td>
</tr>
<tr>
	<td>Date measured:</td>
	<td>{{ file.scan_start_time }}</td>
</tr>
<tr>
	<td>Date uploaded:</td>
	<td>{{ file.upload_timestamp }}, {{ file.uploader.first_name }} {{ file.uploader.last_name }} ({{ file.uploader.email }})</td>
</tr>
{% if doi %}
<tr>
	<td>Citation:</td>
	<td><a href="{{ doi.url }}">{{doi.author}}. {{ doi.title }}, <i>{{doi.journal}}</i> ({{doi.year}}). Times cited: {{doi.ncited}}</a></td>
</tr>
{% endif %}

</table>

{% if aux %}
<br/>
<table class="file-table-aux">
<tr>
	<th>Auxiliary data</th>
	<th>Filename</th>
</tr>
{% for data in aux %}
<tr>
	<td>{{ data.aux_description }}</td>
	<td> <a href="{{ data.aux_file.url }}">{{ data.name }}</a></td>
</tr>
{% endfor %}
</table>
{% endif %}
{% endblock %}
